@file:Suppress("unused", "UnusedImport", "EnumEntryName", "RemoveRedundantQualifierName")

package com.gasbuddy.mobile.common.webservices.apis

import com.gasbuddy.mobile.common.interfaces.Jsonable
import com.gasbuddy.mobile.common.webservices.GBIORxWebServices
import com.google.gson.annotations.SerializedName
import io.reactivex.Observable
import io.reactivex.Single
import io.reactivex.schedulers.Schedulers
import retrofit2.Call
import retrofit2.Response
import retrofit2.Retrofit
import retrofit2.http.*
import org.threeten.bp.OffsetDateTime
import okhttp3.MultipartBody
import okhttp3.ResponseBody

// @formatter:off
class {{{apiClassName}}} : GBIORxWebServices() {

    //region Companion
    companion object {
        @JvmStatic
        val api: API = createAPI(baseUrl = host, clazz = API::class.java)
    }
    //endregion


    //region Web Services
    interface API {
        {{#each methods}}

        /**
         * {{{description}}}
         {{#each params}}
         * @param {{{name}}} {{{description}}}
         {{/each}}
         * @return {{{response.type}}}
         */
        {{#if multipart}}
        @Multipart
        {{else}}
        @Headers("Content-Type:application/json"{{#if streaming}}, "Accept:text/event-stream", "Cache-Control:no-cache"{{/if}})
        {{/if}}
        @{{{capMethod}}}("{{{path}}}")
        {{#if streaming}}
        @Streaming
        {{/if}}
        @JvmSuppressWildcards
        {{#if streaming}}{{else}}suspend {{/if}}fun {{{name}}}(
        {{#each params}}
            @{{{inCap}}}{{#isNotBodyOrPartParam this}}("{{{serverName}}}"){{/isNotBodyOrPartParam}} {{{name}}}: {{{type}}}{{#unless required}}? = null{{/unless}}{{~#unless @last}},{{/unless}}
        {{/each}}
        ) : {{#if streaming}}Call<ResponseBody>{{else}}{{{response.type}}}{{/if}}

        {{/each}}

    }
    //endregion


    //region Models
    {{#each objectModels}}
    {{> modelClassTemplate}}

    {{/each}}
    //endregion

    //region Enums
    {{#each enumModels}}
    enum class {{{name}}} { 
        {{#each values}}
        @SerializedName({{{value}}}) {{{uName}}}{{~#unless @last}},{{/unless}}
        {{/each}}
    }

    {{/each}}
    //endregion
    
}
